"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="checklist-model"),angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,n){function r(e,n,r){if(angular.isArray(e))for(var t=e.length;t--;)if(r(e[t],n))return!0;return!1}function t(e,n,t){return e=angular.isArray(e)?e:[],r(e,n,t)||e.push(n),e}function a(e,n,r){if(angular.isArray(e))for(var t=e.length;t--;)if(r(e[t],n)){e.splice(t,1);break}return e}function i(i,o,c){function l(){m(),M(),y()}function s(){return c.checklistValue?e(c.checklistValue)(i.$parent):c.value}function u(e,n){var r=h(i.$parent);angular.isFunction(h.assign)&&(n===!0?h.assign(i.$parent,t(r,e,k)):h.assign(i.$parent,a(r,e,k)))}function f(e,n){return g&&g(i)===!1?void u(s(),$(i)):void $.assign(i,r(e,s(),k))}var p=c.checklistModel;c.$set("checklistModel",null),n(o)(i),c.$set("checklistModel",p);var h=e(p),d=e(c.checklistChange),g=e(c.checklistBeforeChange),$=e(c.ngModel),k=angular.equals;if(c.hasOwnProperty("checklistComparator"))if("."==c.checklistComparator[0]){var v=c.checklistComparator.substring(1);k=function(e,n){return e[v]===n[v]}}else k=e(c.checklistComparator)(i.$parent);var m=i.$watch(c.ngModel,function(e,n){if(e!==n){if(g&&g(i)===!1)return void $.assign(i,r(h(i.$parent),s(),k));u(s(),e),d&&d(i)}}),M=i.$watch(s,function(e,n){if(e!=n&&angular.isDefined(n)&&i[c.ngModel]===!0){var r=h(i.$parent);h.assign(i.$parent,a(r,n,k)),h.assign(i.$parent,t(r,e,k))}},!0),y=i.$on("$destroy",l);angular.isFunction(i.$parent.$watchCollection)?i.$parent.$watchCollection(p,f):i.$parent.$watch(p,f,!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,n){if(!n.checklistValue&&!n.value)throw"You should provide `value` or `checklist-value`.";return n.ngModel||n.$set("ngModel","checked"),i}}}]);